#!/usr/local/bin/node
var NerfHerder = require('../lib/nerfHerder');
var argv = require('optimist')
            .usage('nerfHerder -d MONGO_CONNECTION_STRING -f PATH_TO_CONFIG')
            .default('d', 'mongodb://localhost:27017/local')
            .argv;

var config = undefined;
//console.dir(process);

if (argv.f){
    config = require([process.env.PWD, argv.f].join('/'));
}

var nf = new NerfHerder(argv.d, config);
nf.on('polling', print);
nf.on('destroy', eprint);
setTimeout(function(){nf.stopPolling();}, 5000);


function eprint(){
console.log('destroyed');
}
function print(){
console.log('polling');
}
