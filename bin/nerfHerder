#!/usr/local/bin/node
var NerfHerder = require('../lib/nerfHerder');
var argv = require('optimist')
            .usage('nerfHerder -d MONGO_CONNECTION_STRING -f PATH_TO_CONFIG')
            .default('d', 'mongodb://localhost:27017/local')
            .argv;

var config = undefined;

if (argv.f){
    config = require([process.env.PWD, argv.f].join('/'));
}

var nf = new NerfHerder(argv.d, config);
//nf.on('polling', print);
nf.on('cull', function(id){console.error('Nerf Herder killing mongo process %d', id);});

nf.on('destroy', function(){console.log('Nerf Herder polling stopped');});


